---
title: FMCにおけるEOについて（加筆修正版）
author: uesyuu
type: post
date: 2018-11-12T10:18:12+00:00
og_img:
  - http://uesyuu.wp.xdomain.jp/wp-content/uploads/2018/11/6-1.png
categories:
  - FMC

---
この記事は[Speedcubing Advent Calender 2018][1] 5日目の記事です。  
4日目の記事は<a href="https://twitter.com/sajiminx" target="_blank" rel="noopener noreferrer">@sajiminx</a>さんの「<a href="https://saji-portal.com/blog/2018/12/04/advent-calendar-2018/" target="_blank" rel="noopener noreferrer">5x5speedにおけるラスト4エッジ解法について</a>」でした。  
今回はFMCにおけるEOを使ったテクニックや考え方について紹介します。  
以前にもAdvent CalenderでEOの記事を書いたことがあるのですが、説明が少なくわかりにくかったため今回加筆修正を行いより多くのテクニックを書こうと思います。

## EOとは？ {#1}

まず、FMCにおけるEOについて説明します。  
EOとは、ある向きに対してエッジが反転しているかどうか、のことを意味します。  
反転というのは、BLDにおける単独エッジ反転ではなく、そのエッジがU,D,R,L回転のみで正位置に戻すことができるか、ということを指します。  
例えば、

  * あるエッジが反転していなければ、そのエッジはU,D,R,L回転のみで正位置に戻すことができます。
  * あるエッジが反転していれば、そのエッジはU,D,R,L回転のみでは正位置に戻すことができず、F,B回転が必要となります。

また、そのエッジが反転しているか否かを判断するためには以下の方法を用います。

  * U,D面色のあるエッジがU,D面にある場合、エッジのU,D面色ステッカーがU,D面を向いていれば反転なし、R,L,F,B面を向いていれば反転
  * U,D面色のあるエッジが中段にある場合、、エッジのU,D面色ステッカーがF,B面を向いていれば反転なし、R,L面を向いていれば反転
  * U,D面色のないエッジがU,D面にある場合、U,D面を向いているステッカーがF,B面センターと同じ色なら反転なし、R,L面センターと同じ色なら反転
  * U,D面色の無いエッジが中段にある場合、F,B面を向いているステッカーがF,B面センターと同じ色なら反転なし、R,L面センターと同じ色なら反転

例を見てみましょう。  
スクランブル：`U L2 F2 L2 F2 D2 R2 D' L2 U' F2 R' D2 B2 U' B' L B2 F D' R2`  
U面白、F面緑でEOを考えます。  
まず、UFエッジである青黄エッジは、D面色である黄色がF面を向いているため反転。  
次に、UBエッジである青橙エッジは、U,D面色がなくU面を向いているステッカー橙がL面センターである橙と同じ色のため反転。  
と、このように考えていきます。ちなみにこのスクランブルでU面白F面緑の場合、UF,UR,UL,UB,FL,BL,BR,DLエッジが反転しています。  
EOを解消するとその後少ない手数でコーナーエッジペア（c/eペア）が作れることが多く、のちの繋がりがブロックビルディングよりも良いことが多い、とわかっています。そのためFMCではEOを早めに解消することが重要となってきます。

## EOは3方向ある {#2}

先ほどはU面白、F面緑でEOを考えましたが、向きを変えてEOを調べると反転の箇所が全く違ってきます。  
試しにU面白、F面赤で、先ほどのスクランブルでEOを考えてみましょう。  
キューブをy持ち替えして考えてみてください。  
まず、ULエッジである青黄エッジは、D面色である黄色がF面を向いているため先ほどと同様に反転。  
次に、URエッジである青橙エッジは、U,D面色がなくU面を向いているステッカー橙がB面センターである橙と同じ色のため先ほどとは違い反転なし。  
このように、向きを変えると反転の箇所は異なってきます。ちなみにU面白F面赤の場合、y持ち替えした状態でUF,UL,UB,BR,DR,DBエッジが反転しています。  
EOには3方向あると見出しにも書きましたが、3方向というのはF-B軸EO、R-L軸EO、U-D軸EOの3つです。F-B軸EOが先ほどのU面白F面緑のEO、R-L軸EOが先ほどのU面白F面赤のEOとなります。ではなぜ3方向のみなのか？キューブの持ち替えのパターンは24通りあるではないか、と思うかもしれませんが、F-B軸であるF面緑B面青、もしくはF面青B面緑はz回転をしても反転の位置は変わらないのです。なぜなら、EOとは特定のエッジをU,D,R,L回転のみで正位置に戻せるかどうかというのが定義であり、U,D,R,L回転はどんなにz回転してもU,D,R,Lのままだからです。そのため、EOは3方向見ればそれで全パターン網羅できる、ということです。  
このようにEOには3方向あるため、実践では3方向全て調べその中から一番良さそうなのを選ぶのが良いでしょう。特にU-D軸EOはUD色が変わってくるため探しづらいですが、頑張って探しましょう。僕もいまだに苦労しています。

## EOを解消するには {#3}

EOの解消方法ですが、U,D,R,L回転によって反転パーツをF面 or B面に集めF or B回転をして解消するのが基本です。  
例を見てみましょう。  
スクランブル：`F' U' R B R' F U' B U R2 D' L2 B2 L2 D L2 D2 B2`  
U面白F面緑でEOを調べると、UL,BR,DR,DLエッジが反転していることがわかります。反転エッジをF面 or B面に集めるのですが、F面に反転エッジがないためB面に集めることを考えます。この場合U L Dで反転エッジを順々にB面に集め、B or B'で反転を解消するのが最適解です。反転エッジが4つの場合はそれぞれをF面 or B面に集めればいいだけなので割と簡単です。  
`Solution: U L D B or U L D B'`  
続いてもう一例。  
スクランブル：`U F D F L U2 L B2 D L' D2 L2 F L2 D2 B U2 R2 U B`  
U面白F面緑でEOを調べると、UR,BLエッジの2つが反転しています。この場合、あえてB'することでBLエッジの反転を解消しUB,BR,DBエッジを反転させ、反転の個数を4個にしています。その後U'し反転エッジをB面に集めB or B'で反転が解消できます。このように反転エッジの個数が4の倍数ではない場合は、反転エッジを1個または3個 F面 or B面に持っていきF or Bをすることで反転エッジの個数を4の倍数にします。  
`Solution: B' U' B or B' U' B'`

## EO解消の解法は複数ある {#4}

先ほどはEOの解消方法を説明しましたが、反転エッジの場所によっては解消方法が複数あることもあります。  
その一例がこちら。  
スクランブル：`R' U' F R' B2 R D2 F2 L D2 F U2 B' D2 U2 F R' U F2 L U2 R' U' F`  
U面白F面緑でEOを調べると、FR,FL,BL,DFエッジが反転しています。この時反転エッジをF面に集める方法は2通りあります。L U' L'とL' U' L'です。FLエッジをUFに入れるか、BLエッジをUFに入れるかで変わってくるわけです。  
```
Solution:
L U' L' F or L U' L' F'
or L' U' L F or L' U' L F'
```
もう一つ面白い例をあげます。  
スクランブル：`F' U R U2 L' F2 U' R F' U2 D2 B U2 F' D2 L' F2 D2 R' B2 R F' U R`  
U面白F面緑でEOを調べると、UB,UL,FL,DBエッジが反転しています。これらをB面に集める方法は、L' B2 L',L2 B2 L,U R L2,L' U R,F2 L R2の5種類あり、F面に集める方法はD2 U2 R',U2 R' D2の2通りで、同じ手数で計7通りものEO解消方法があります。  
```
Solution:
L' B2 L' B or L' B2 L' B'
or L2 B2 L B or L2 B2 L B'
or U R L2 B or U R L2 B'
or L' U R B or L' U R B'
or F2 L R2 B or F2 L R2 B'
or D2 U2 R' F or D2 U2 R' F'
or U2 R' D2 F or U2 R' D2 F'
```
このように、EO解消には最適解が複数存在する場合があるため注意が必要です。まあ7通りも方法があったら全部試すのは無理なので、EO解消後にc/eペアがあるもののみを重点的に探すのがいいと思います。

## 両方向EO {#5}

両方向EOとはノーマル、インバースの両方からEOを解消していくといったものです。  
わかりにくいので例をあげます。  
スクランブル：`R' U' F L2 R2 U2 B2 L2 U' B2 D L B' U B' D2 F' L' F U' R D R' U' F`  
インバース：`F' U R D' R' U F' L F D2 B U' B L' D' B2 U L2 B2 U2 R2 L2 F' U R`  
まずインバースの状態を確認すると、U面白F面赤のEOですが、U面白F面緑から見てUB,UL,BL,FL,FR,DR,DB,DLエッジが反転しています。ここでL面の橙面には反転エッジが4つあるためLで4つの反転を解消します。続いて残り4エッジはU BでF面に集められるので、L U B Rの計4手でEOが解消されます。しかしそうせずに、Lした後にノーマルにスイッチしてみてください（つまりpremove:L'をつけてノーマルを実行）。ノーマルにスイッチするとU面白F面赤のEOは、U面白F面緑から見てUF,BL,DF,DLが反転していることがわかります。これは、ノーマル（インバース）にスイッチしても反転エッジの個数は同じであるが位置は違ってくる、といった性質を利用しています。そしてU FすることでB面に反転エッジを集めることができ、Lすることでこれも計4手でEOを解消させられます。  
`Solution: (L) U F L`  
このように、部分的にEOを解消してからスイッチして全部のEOを解消させる、といった方法を両方向EOと呼んでいます。普通にやってもEOが5手以上かかるケースも、両方向EOを使えば4手以内に収まることもよくあります。F,B面に初めから反転エッジが4つあった場合、それらを直してからスイッチしてみるのもありだと思います。

## EO後の2x2x3の優劣 {#6}

EO解消した後2x2x2を作り2x2x3を作るという流れが基本ですが、2x2x3の作られた場所によってその後の繋がりやすさが大きく変わってきます。  
F-B軸EO解消後にDLBコーナー周りに2x2x2を作った時、その後の2x2x3の場所として3パターンあげられます。

|F面に拡張した場合|R面に拡張した場合|U面に拡張した場合|
|--|--|--|
|![](/images/2018/11/6-1.png)|![](/images/2018/11/6-2.png)|![](/images/2018/11/6-3.png)|

このうちその後の繋がりが一番いいのはF面拡張の2x2x3です。理由は、EOを崩さないU面とR面が自由に回転できるからです。残りのエッジはU,R回転のみで揃うため、簡単にスケルトンを作ることができます。  
残りの2つですが、この2つは同一パターンとしてみなせます（にっけんさんに指摘されて初めて気づきました）。R面拡張の2x2x3の場合はDRFコーナーまたはDLFコーナー周りに2x2x2を作るとEO無しのF2L-1が作れますが、URBコーナーまたはULBコーナー周りに2x2x2を作るとEO有り（時にはエッジ全反転）のF2L-1になってしまう可能性があります。同様に、U面拡張の2x2x3の場合はULFコーナーまたはDLFコーナー周りに2x2x2を作るとEO無しのF2L-1が作れますが、URBコーナーまたはDRBコーナー周りに2x2x2を作るとEO有りのF2L-1になってしまう可能性があります。  
これらを総合すると、F-B軸EOの場合はF,B面に、R-L軸EOの場合はR,L面に、U-D軸EOの場合はU,D面に2x2x2を作って2x2x3にするとその後が2genでエッジを揃えられるため、できるだけそのような2x2x3を作れたほうがいいです。また、そうでない2x2x3を作った場合、次の2x2x2を作る場所を慎重に決めることが重要でしょう。

## Domino Reduction {#7}

さあ、ここからは最新のFMCテクニックの紹介です。  
Domino Reductionとは、初めにCO,EOを揃え、かつ中段全てに中段パーツが入っている状態を目指し、そこから[U,D,R2,L2,F2,B2]のみを使って完成まで揃えていく、といった解法です。[U,D,R2,L2,F2,B2]のみで揃えるという部分が3x3x2（Rubik's Domino）の解法と同じであることから「Domino Reduction」と呼ばれています。この解法、実はコンピュータが短い解法を出力するプログラムで使われている解法と全く同じものなのです。つまり、コンピュータがやっていることを人間もやってみたら短い解法が導き出せるのでは？という発想から生まれたものです。  
一つ例を紹介します。  
スクランブル：`R' U' F U2 R2 U2 F L2 F2 D2 L' D2 F U L D F' L' B D' U2 F R' U' F`  
インバース：`F' U R F' U2 D B' L F D' L' U' F' D2 L D2 F2 L2 F' U2 R2 U2 F' U R`  
まずインバースでR' B' D' LでR-L軸EOを解消させます。続いてノーマルにスイッチしD B D L2 F D' FでCO,EO,中段を揃えます。これで1ステップ終了です。  
ここからは[U,D,R2,L2,F2,B2]のみで揃えます。まずL2 F2で2x2x1を3つ作り、D' B2で2x2x2を作ります。続いてU' F2 L2 Uで2x2x3とコーナーを揃え、最後に[U' L2 F2 L2 U' L2 F2 L2]のエッジ5点交換（！）を行えば完成です。  
以下にその解答を書き下します。（カッコ内はインバース）  
```
Solution:<br />
(R' B' D' L) // EO
D B D L2 F D' F // domino
L2 F2 // 3x 1x2x2
D' B2 // 2x2x2
U' F2 L2 U // finish corners
U' L2 F2 L2 U' L2 F2 L2 // solve l5e
```
・・・ね、簡単でしょ？  
というわけのわからない解法がDomino Reductionなのです。正直Dominoにする過程も運だろうし、Dominoから先をスマートに揃えていけるかも運なんですよね。これを人間が全てのソルブで使うことは無理だと僕は思います。ただ、EO後に中段やCOがめっちゃ揃ってるような時にはDominoを考えてもいいかもしれません。

## PDR (Partial Domino Reduction) {#8}

先ほどはDomino Reductionは人間には無理だと言いましたが、それを人間にも可能にさせたのがPDR(Partial Domino Reduction)です。つまり、COを全部揃えなくてもいいからできるだけ揃えて擬似Dominoを作り、そこから[U,D,R2,L2,F2,B2]のみで揃えることでコーナーを残したスケルトンを作ろう、といった発想から生まれたものになります。  
これも例を見てみましょう。  
スクランブル：`R' U' F L2 U2 B' L2 F' U2 B L2 B R' B2 L U B L2 B' D' F2 R F R' U' F`  
まずノーマルでD' R' U' FによりF-B軸EOを解消します。続いてLで中段のFL,BLエッジを入れ、R2 U RでFR,BRエッジを入れます。これで中段は完成したのでPDR1ステップ目終了です。UBR,UBL,DFR,DBRコーナーがCOしており残り4コーナーは揃っているのでこれをPDR4と呼びます（4は揃っているコーナーの数）。ここからD F2 D2 B2とすることでブロックを作り、U2 L2 D R2 Uで残り5コーナーのスケルトンに持ち込みます。  
以下にその解答を書き下します。  
```
Solution:
D' R' U' F // EO
L R2 U R // PDR4
D F2 D2 B2 // CORNER LINE+ EDGE LINE
U2 L2 D R2 U // AB5C
```
PDRでの一番の難関はPDR後のスケルトン作りだと思います。PDR自体はDominoよりもはるかに作りやすいので苦労はしませんが、その後どう続けるかは運とブロックビルディングの力に依存します。やはりこれも毎回PDRを使っていくのではなく、PDR後が続きそうなときのみ採用し、ダメそうだと思ったら早めにブロックビルディングに戻ったほうが無駄な時間を使わずに済みそうです。  
ちなみにPDRを使った解答例をまとめたドキュメントがあるので、気になる方はこちらもチェックしてみてください。→[リンク][2]

## 終わりに {#9}

ここまでEOについての色々なテクニックを紹介してきました。しかし、1つ言えるのは「毎回EOを使うのは必ずしも得策ではない」ということです。2018アジア大会の3試技目、暫定1位だったWong Chong WenはEOに固執したせいで時間オーバーでDNFとなり、EOを使わなかった自分が優勝しました。EOに固執し続けるのはやはり良くなく、これは無理だと判断したら即座にブロックビルディングに切り替えるべきだと思います（切り替えの判断も難しいところですが・・・）。ただ、EOには未来があります。先日更新されたFMC単発WR18手もEOスタートによるものです。なので僕は、まずEOスタートで始め、いいのがなければブロックビルディングに切り替えるという方法で最近はやっています。もちろんブロックビルディングでも2x2x2や2x2x3からEO解消を試みることもしています。何が正解か、というのはなく、自分の方針を一つ決めてそれに従ってやってみるのがいいと思います。

### それでは良いFMCライフを！

 [1]: https://adventar.org/calendars/3001
 [2]: https://docs.google.com/document/d/1oZwr2aSllFBL5lhbLTiWKQWplfk4i0LN0wA0uskeLJs/edit?fbclid=IwAR1FDum_Y2GAAF4Pn6onA2YlSrCsnQBibj_TAA8h9mn7MXDJKlj8MKKYAfk